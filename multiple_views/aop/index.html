
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Aspect.js demo1</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="../dynamic/criminalData.js"></script>
    <script type="text/javascript" src="./aspect.js"></script>
  </head>
  <body>
    
  </body>
  <script type="text/javascript">
    
    function ObjectA(){}
    ObjectA.prototype = {
      _id: 0,
      _name: '',
      name: function() {
        return this._name;
      },
      id: function() {
        return this._id;
      },
      funcA: function(id,name) {
        console.log("you just called me");
      }
    }

    //Aspect
    function ProfileAspect(){}
    ProfileAspect.prototype = {
      logStart: function ( args) {
        console.log("Func started " + (new Date()).getTime());
      },
      logEnd: function ( result) {
        console.log("Func ended " + (new Date()).getTime());
      },
      profileFunc: function ( realFunc, args, funcName) {
        var start = (new Date ( )).getTime ( );
        log.debug('Going to execute ' + funcName);
        var result = realFunc.apply(this,args);
        log.debug('Elapsed time : ' + ((new Date ( )).getTime ( ) - start)/1000 + ' milliseconds in ' + funcName);
        return result;
      }
    }

    Weaver.addAdvice( ProfileAspect, 'logStart', 'before', ObjectA, 'funcA');
    Weaver.addAdvice( ProfileAspect, 'logStart', 'after', ObjectA, 'funcA');

    var a = new ObjectA();
    a.funcA();

  </script>
</html>